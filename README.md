<div align="center">

# RAI

### <img src="https://api.iconify.design/solar/planet-saturn-bold.svg?color=%23F59E0B&width=32&height=32" valign="middle" alt="RAI Logo" /> æ™ºèƒ½ AI èŠå¤©åŠ©æ‰‹ | Intelligent AI Chat Assistant

[![Version](https://img.shields.io/badge/Version-0.85+-F59E0B?style=flat-square)]()
[![Node.js](https://img.shields.io/badge/Node.js-18+-339933?style=flat-square&logo=node.js&logoColor=white)](https://nodejs.org/)
[![Express](https://img.shields.io/badge/Express-4.x-000000?style=flat-square&logo=express&logoColor=white)](https://expressjs.com/)
[![SQLite](https://img.shields.io/badge/SQLite-3-003B57?style=flat-square&logo=sqlite&logoColor=white)](https://sqlite.org/)
[![License](https://img.shields.io/badge/License-Personal_Free-F59E0B?style=flat-square)](#-æˆæƒä¸å•†ç”¨)

**RAI v0.85+** å…¨æ–° **Chat Flow æ€ç»´æµ** åŠŸèƒ½ï¼Œå°†å¯¹è¯ä¸å¯è§†åŒ–ç”»å¸ƒç»“åˆï¼Œæ„å»ºæ€ç»´å›¾è°±ï¼

## å®˜ç½‘ï¼šrai.rick.quest  

[English](#english) | [åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§) | [åŠŸèƒ½åˆ—è¡¨](#-åŠŸèƒ½åˆ—è¡¨) | [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) | [æ¨¡å‹è·¯ç”±](#-æ™ºèƒ½æ¨¡å‹è·¯ç”±) | [åœ¨çº¿ä½“éªŒ](#-åœ¨çº¿ä½“éªŒ)

</div>

---

# æœ€æ–°æ›´æ–°å†…å®¹

## ğŸ¨ Chat Flow æ€ç»´æµ (v0.85+ é‡ç£…æ–°å¢)

å°† AI å¯¹è¯ä¸å¯è§†åŒ–ç”»å¸ƒå®Œç¾ç»“åˆï¼Œæ‰“é€ å±äºä½ çš„æ€ç»´å›¾è°±ï¼š

- **æ— é™ç”»å¸ƒ**: æ‹–æ‹½å¯¹è¯å†…å®¹åˆ°ç”»å¸ƒï¼Œè‡ªç”±ç»„ç»‡ä½ çš„æ€ç»´
- **æ™ºèƒ½è¿çº¿**: ä¸ºèŠ‚ç‚¹åˆ›å»ºè¯­ä¹‰åŒ–è¿æ¥ï¼Œæ·»åŠ æ ‡ç­¾è¯´æ˜å…³ç³»  
- **AI æ‹†è§£**: é€‰ä¸­èŠ‚ç‚¹åï¼ŒAI è‡ªåŠ¨åˆ†è§£ä¸ºå­è¯é¢˜
- **å¤šç§å¯¼å‡º**: æ”¯æŒ PNGã€SVGã€Mermaidã€JSON å¯¼å‡º
- **è‡ªåŠ¨å¸ƒå±€**: ä¸€é”®æ•´ç†ç”»å¸ƒèŠ‚ç‚¹

<img width="2790" height="1716" alt="Chat Flow ç•Œé¢" src="https://github.com/user-attachments/assets/96b0a2c4-b42a-4644-817f-b3d1c94a76ff" /> 
<img width="682" height="832" alt="Chat Flow ç§»åŠ¨ç«¯" src="https://github.com/user-attachments/assets/7270482c-9b3d-4be4-84a9-d20b3726d411" />

---

## <img src="https://api.iconify.design/material-symbols/star-outline.svg?color=%23F59E0B&width=24&height=24" valign="middle" /> åŠŸèƒ½ç‰¹æ€§

### <img src="https://api.iconify.design/material-symbols/robot-2-outline.svg?color=%23F59E0B&width=20&height=20" valign="middle" /> å¤šæ¨¡å‹æ”¯æŒ
- **é˜¿é‡Œäº‘é€šä¹‰åƒé—®**: Qwen-Flash / Qwen-Plus / Qwen-Max / Qwen3 8B (å…è´¹) / Qwen3 Omni Flash
- **DeepSeek**: DeepSeek-V3.2
- **Moonshot**: Kimi K2
- **æœ¬åœ°éƒ¨ç½²**: LMStudio æœ¬åœ°æ¨¡å‹

### <img src="https://api.iconify.design/material-symbols/psychology.svg?color=%23F59E0B&width=20&height=20" valign="middle" /> æ™ºèƒ½æ¨¡å‹è·¯ç”± (æ ¸å¿ƒç‰¹è‰²)
- **Auto æ¨¡å¼**: æ ¹æ®é—®é¢˜å¤æ‚åº¦è‡ªåŠ¨é€‰æ‹©æœ€ä½³æ¨¡å‹
- **äº”ç»´åº¦åˆ†æ**: è¾“å…¥é•¿åº¦ã€ä»£ç æ£€æµ‹ã€æ•°å­¦å…¬å¼ã€æ¨ç†å¤æ‚åº¦ã€è¯­è¨€æ··åˆåº¦
- **å…³é”®è¯è§¦å‘**: æƒ…ç»ªè¯ã€ä¸“ä¸šæœ¯è¯­ã€å¤æ‚å€¼è¯æ™ºèƒ½è¯†åˆ«
- **é¢„è®¾ç­”æ¡ˆ**: å¸¸è§é—®å€™è¯­æé€Ÿå“åº”ï¼Œé›¶æˆæœ¬é›¶å»¶è¿Ÿ

### <img src="https://api.iconify.design/material-symbols/language.svg?color=%23F59E0B&width=20&height=20" valign="middle" /> è”ç½‘æœç´¢
- Tavily API å®æ—¶æœç´¢é›†æˆ
- é˜¿é‡Œäº‘åŸç”Ÿè”ç½‘æœç´¢æ”¯æŒ
- AI æ™ºèƒ½åˆ¤æ–­æ˜¯å¦éœ€è¦è”ç½‘
- æœç´¢ç»“æœè‡ªåŠ¨æ³¨å…¥å¯¹è¯ä¸Šä¸‹æ–‡

### <img src="https://api.iconify.design/material-symbols/thinking-problem-outline.svg?color=%23F59E0B&width=20&height=20" valign="middle" /> æ€è€ƒæ¨¡å¼ (Chain of Thought)
- DeepSeek Reasoner æ·±åº¦æ¨ç†
- é˜¿é‡Œäº‘ Qwen æ€è€ƒæ¨¡å¼
- æ€è€ƒè¿‡ç¨‹å¯è§†åŒ–å±•ç¤º
- æ€è€ƒé¢„ç®—å¯è°ƒæ§ (1-32768 tokens)

### <img src="https://api.iconify.design/material-symbols/devices.svg?color=%23F59E0B&width=20&height=20" valign="middle" /> ç°ä»£åŒ– UI
- å“åº”å¼è®¾è®¡ï¼Œå®Œç¾é€‚é… PC / ç§»åŠ¨ç«¯
- æ·±è‰² / æµ…è‰²ä¸»é¢˜åˆ‡æ¢
- æµå¼è¾“å‡ºï¼Œæ‰“å­—æœºæ•ˆæœ
- Markdown + LaTeX æ•°å­¦å…¬å¼æ¸²æŸ“
- Mermaid å›¾è¡¨æ¸²æŸ“ (æ”¯æŒå…¨å±ã€ç¼©æ”¾ã€å¯¼å‡º)
- ç²¾ç¾åŠ¨ç”»æ•ˆæœ

### <img src="https://api.iconify.design/material-symbols/image.svg?color=%23F59E0B&width=20&height=20" valign="middle" /> å¤šæ¨¡æ€èƒ½åŠ›
- å›¾ç‰‡ç†è§£ä¸æè¿° (Qwen VL Max / Qwen3 Omni Flash)
- è§†é¢‘ç†è§£ (Qwen VL Max Latest)
- æ–‡æ¡£ä¸Šä¼ ä¸è§£æ (PDF, DOCX, TXT)
- AI å›å¤æ”¯æŒæ’å…¥å›¾ç‰‡

### <img src="https://api.iconify.design/material-symbols/format-quote.svg?color=%23F59E0B&width=20&height=20" valign="middle" /> å¼•ç”¨å›å¤
- æ¶ˆæ¯å¼•ç”¨åŠŸèƒ½ï¼Œå›å¤ç‰¹å®šå†…å®¹
- å¼•ç”¨é¢„è§ˆï¼Œå¿«é€Ÿå®šä½ä¸Šä¸‹æ–‡
- æ”¯æŒåˆ é™¤å’Œä¿®æ”¹å¼•ç”¨

### <img src="https://api.iconify.design/material-symbols/edit-note.svg?color=%23F59E0B&width=20&height=20" valign="middle" /> ç¼–è¾‘æ¶ˆæ¯
- å·²å‘é€æ¶ˆæ¯å¯ç¼–è¾‘ä¿®æ”¹
- ç¼–è¾‘åé‡æ–°ç”Ÿæˆ AI å›å¤
- ä¿ç•™ç¼–è¾‘å†å²è®°å½•

### <img src="https://api.iconify.design/material-symbols/card-membership.svg?color=%23F59E0B&width=20&height=20" valign="middle" /> ä¼šå‘˜ç³»ç»Ÿ
- æ¯æ—¥ç­¾åˆ°é¢†å– 20 ç‚¹æ•°
- ç‚¹æ•°æ¶ˆè´¹é€æ˜è®°å½•
- VIP ä¼šå‘˜ç­‰çº§ä¸æƒç›Š

### <img src="https://api.iconify.design/material-symbols/lock-outline.svg?color=%23F59E0B&width=20&height=20" valign="middle" /> å®‰å…¨å¯é 
- JWT ä»¤ç‰Œè®¤è¯
- API é™æµä¿æŠ¤
- å¯†ç åŠ å¯†å­˜å‚¨

---

## <img src="https://api.iconify.design/material-symbols/list-alt-outline.svg?color=%23F59E0B&width=24&height=24" valign="middle" /> åŠŸèƒ½åˆ—è¡¨

| ç±»åˆ« | åŠŸèƒ½ | æè¿° |
|:---|:---|:---|
| **æ ¸å¿ƒå¯¹è¯** | æµå¼å“åº” | æ‰“å­—æœºæ•ˆæœï¼Œå®æ—¶è¾“å‡º |
| | Markdown æ¸²æŸ“ | æ”¯æŒè¡¨æ ¼ã€åˆ—è¡¨ã€å¼•ç”¨ç­‰å¯Œæ–‡æœ¬æ ¼å¼ |
| | æ•°å­¦å…¬å¼ | æ”¯æŒ LaTeX è¯­æ³•ï¼Œå®Œç¾æ¸²æŸ“å¤æ‚å…¬å¼ |
| | ä»£ç é«˜äº® | è‡ªåŠ¨è¯†åˆ«ç¼–ç¨‹è¯­è¨€ï¼Œæä¾›è¯­æ³•é«˜äº® |
| | Mermaid å›¾è¡¨ | æµç¨‹å›¾ã€åºåˆ—å›¾ã€æ€ç»´å¯¼å›¾ç­‰ï¼Œæ”¯æŒå…¨å±äº¤äº’ |
| | æ¶ˆæ¯å¤åˆ¶ | ä¸€é”®å¤åˆ¶ AI å›å¤å†…å®¹ |
| | åœæ­¢ç”Ÿæˆ | éšæ—¶ä¸­æ–­ AI çš„è¾“å‡ºè¿‡ç¨‹ |
| | **å›¾æ–‡å¹¶èŒ‚** | AI å›å¤æ”¯æŒä¸°å¯Œå›¾ç‰‡å†…å®¹ |
| | **å¼•ç”¨å›å¤** | æ¶ˆæ¯å¼•ç”¨åŠŸèƒ½ï¼Œç²¾å‡†å›å¤ |
| | **ç¼–è¾‘æ¶ˆæ¯** | å·²å‘é€æ¶ˆæ¯å¯ç¼–è¾‘ä¿®æ”¹ |
| **Chat Flow** | æ€ç»´æµç”»å¸ƒ | å°†å¯¹è¯æ‹–æ‹½åˆ°æ— é™ç”»å¸ƒ |
| | èŠ‚ç‚¹è¿æ¥ | åˆ›å»ºè¯­ä¹‰åŒ–è¿çº¿ï¼Œæ·»åŠ æ ‡ç­¾ |
| | AI æ‹†è§£ | æ™ºèƒ½åˆ†è§£è¯é¢˜ä¸ºå­èŠ‚ç‚¹ |
| | å¤šæ ¼å¼å¯¼å‡º | PNG / SVG / Mermaid / JSON |
| | è‡ªåŠ¨å¸ƒå±€ | ä¸€é”®æ•´ç†ç”»å¸ƒèŠ‚ç‚¹ |
| **æ¨¡å‹èƒ½åŠ›** | å¤šæ¨¡å‹åˆ‡æ¢ | Qwen ç³»åˆ— / DeepSeek / Kimi K2 / æœ¬åœ°æ¨¡å‹ |
| | **æ™ºèƒ½è·¯ç”±** | è‡ªåŠ¨åˆ†æé—®é¢˜å¤æ‚åº¦ï¼Œé€‰æ‹©æœ€ä¼˜æ¨¡å‹ (Autoæ¨¡å¼) |
| | è”ç½‘æœç´¢ | AI è‡ªä¸»åˆ¤æ–­æ˜¯å¦éœ€è¦æœç´¢ï¼Œå®æ—¶è·å–ç½‘ç»œä¿¡æ¯ |
| | æ€è€ƒæ¨¡å¼ | å±•ç¤º AI æ¨ç†è¿‡ç¨‹ï¼Œæ”¯æŒæŠ˜å /å±•å¼€å’Œé€å¥åŠ¨ç”» |
| | é¢„è®¾ç­”æ¡ˆ | å¸¸è§é—®å€™è¯­æ¯«ç§’çº§å“åº”ï¼Œæ— éœ€æ¶ˆè€— Token |
| | **å¤šæ¨¡æ€** | å›¾ç‰‡/è§†é¢‘ç†è§£ï¼Œæ–‡æ¡£è§£æ |
| **ä¼šè¯ç®¡ç†** | ä¼šè¯åˆ—è¡¨ | ä¾§è¾¹æ ç®¡ç†æ‰€æœ‰å†å²å¯¹è¯ |
| | è‡ªåŠ¨æ ‡é¢˜ | æ ¹æ®å¯¹è¯å†…å®¹è‡ªåŠ¨ç”Ÿæˆåˆé€‚çš„æ ‡é¢˜ |
| | æ–°å»º/åˆ é™¤ | éšæ—¶å¼€å¯æ–°è¯é¢˜æˆ–æ¸…ç†æ—§è®°å½• |
| | ä¼šè¯æœç´¢ | å¿«é€ŸæŸ¥æ‰¾å†å²å¯¹è¯å†…å®¹ |
| **ç”¨æˆ·ç³»ç»Ÿ** | æ³¨å†Œ/ç™»å½• | é‚®ç®±+å¯†ç æ³¨å†Œï¼ŒJWT å®‰å…¨è®¤è¯ |
| | å¤´åƒç®¡ç† | æ”¯æŒä¸Šä¼ è‡ªå®šä¹‰å¤´åƒ |
| | ä¸ªæ€§åŒ–é…ç½® | è‡ªå®šä¹‰æ¸©åº¦ã€Top-Pã€æœ€å¤§é•¿åº¦ç­‰å‚æ•° |
| | ç³»ç»Ÿæç¤ºè¯ | è®¾ç½®å…¨å±€ System Promptï¼Œå®šåˆ¶ AI äººè®¾ |
| | **æ¯æ—¥ç­¾åˆ°** | ç­¾åˆ°é¢†å– 20 ç‚¹æ•° |
| **ç•Œé¢äº¤äº’** | å“åº”å¼è®¾è®¡ | å®Œç¾é€‚é…æ¡Œé¢ã€å¹³æ¿å’Œæ‰‹æœºå±å¹• |
| | ä¸»é¢˜åˆ‡æ¢ | æ”¯æŒæ·±è‰²æ¨¡å¼å’Œæµ…è‰²æ¨¡å¼ |
| | å¤šè¯­è¨€ | ä¸­æ–‡ / English |
| | åŠ¨ç”»æ•ˆæœ | æ¬¢è¿é¡µåœŸæ˜Ÿæµ®åŠ¨ã€æ ‡é¢˜é‡‘å±å…‰æ³½ã€æ¶ˆæ¯æ»‘å…¥ç­‰ |
| | å¿«æ·æ“ä½œ | æ¬¢è¿é¡µæä¾›å¸¸ç”¨åŠŸèƒ½å¿«æ·å…¥å£ |

---

## <img src="https://api.iconify.design/material-symbols/rocket-launch-outline.svg?color=%23F59E0B&width=24&height=24" valign="middle" /> å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js 18+
- npm æˆ– yarn

### å®‰è£…æ­¥éª¤

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/yourusername/RAI.git
cd RAI/rai

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨æœåŠ¡
npm start
# æˆ–å¼€å‘æ¨¡å¼
npm run dev
```

### è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—®: `http://localhost:3009`

---

## <img src="https://api.iconify.design/material-symbols/hub.svg?color=%23F59E0B&width=24&height=24" valign="middle" /> æ™ºèƒ½æ¨¡å‹è·¯ç”±

RAI çš„æ ¸å¿ƒç‰¹è‰²æ˜¯**æ™ºèƒ½æ¨¡å‹è·¯ç”±ç³»ç»Ÿ**ï¼Œèƒ½å¤Ÿè‡ªåŠ¨åˆ†æç”¨æˆ·è¾“å…¥å¹¶é€‰æ‹©æœ€åˆé€‚çš„ AI æ¨¡å‹ã€‚

<div align="center">
<img width="800" alt="RAIæ¨¡å‹è·¯ç”±" src="https://github.com/user-attachments/assets/b4726c1b-cba3-4ade-b6d9-68225ab29082" />
</div>

### è·¯ç”±ç­–ç•¥

| å¤æ‚åº¦è¯„åˆ† | é€‰æ‹©æ¨¡å‹ | é€‚ç”¨åœºæ™¯ |
|:---:|:---:|:---|
| < 0.40 | Qwen-Flash | ç®€å•é—®ç­”ã€æ—¥å¸¸èŠå¤© |
| 0.40 - 0.80 | Qwen-Plus | ä¸­ç­‰å¤æ‚åº¦é—®é¢˜ |
| â‰¥ 0.80 | Qwen-Max | ä¸“ä¸šé—®é¢˜ã€æ·±åº¦åˆ†æ |

### äº”ç»´åº¦è¯„ä¼°

```
ğŸ“ è¾“å…¥é•¿åº¦     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘  æƒé‡: 15%
ğŸ’» ä»£ç æ£€æµ‹     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘  æƒé‡: 30%
ğŸ“ æ•°å­¦å…¬å¼     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘  æƒé‡: 25%
ğŸ§  æ¨ç†å¤æ‚åº¦   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘  æƒé‡: 25%
ğŸŒ è¯­è¨€æ··åˆ     â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  æƒé‡: 5%
```

### ç‰¹æ®Šè§¦å‘è¯

- **å¼ºåˆ¶ Max**: æƒ…ç»ªè¯ã€å¼ºè°ƒè¯ã€é‡è¦æ ‡ç‚¹
- **ä¸“ä¸šå‡çº§**: æŠ€æœ¯æœ¯è¯­ã€ç¼–ç¨‹æ¦‚å¿µã€æ•°å­¦è¯æ±‡

---

## <img src="https://api.iconify.design/material-symbols/play-circle-outline.svg?color=%23F59E0B&width=24&height=24" valign="middle" /> åœ¨çº¿ä½“éªŒ

- **åœ¨çº¿è¯•ç”¨**: è®¿é—® [rick.quest](https://rick.quest) å¹¶é€‰æ‹© **RAI** å³å¯åœ¨çº¿ä½“éªŒã€‚
- **åŠŸèƒ½æ¼”ç¤º**: è§‚çœ‹è¯¦ç»†ä»‹ç» [RAI ä»‹ç»é¡µ](https://rick.rth2.xyz/ai/main.html#how-it-works)

---

## <img src="https://api.iconify.design/material-symbols/menu-book-outline.svg?color=%23F59E0B&width=24&height=24" valign="middle" /> API æ–‡æ¡£

### è®¤è¯ç›¸å…³

| ç«¯ç‚¹ | æ–¹æ³• | æè¿° |
|:---|:---:|:---|
| `/api/auth/register` | POST | ç”¨æˆ·æ³¨å†Œ |
| `/api/auth/login` | POST | ç”¨æˆ·ç™»å½• |
| `/api/auth/verify` | GET | éªŒè¯ä»¤ç‰Œ |

### ç”¨æˆ·ç›¸å…³

| ç«¯ç‚¹ | æ–¹æ³• | æè¿° |
|:---|:---:|:---|
| `/api/user/profile` | GET | è·å–ç”¨æˆ·ä¿¡æ¯ |
| `/api/user/config` | PUT | æ›´æ–°ç”¨æˆ·é…ç½® |
| `/api/user/avatar` | POST | ä¸Šä¼ å¤´åƒ |
| `/api/user/membership` | GET | è·å–ä¼šå‘˜çŠ¶æ€ |
| `/api/user/checkin` | POST | æ¯æ—¥ç­¾åˆ° |

### ä¼šè¯ç›¸å…³

| ç«¯ç‚¹ | æ–¹æ³• | æè¿° |
|:---|:---:|:---|
| `/api/sessions` | GET | è·å–ä¼šè¯åˆ—è¡¨ |
| `/api/sessions` | POST | åˆ›å»ºæ–°ä¼šè¯ |
| `/api/sessions/:id` | PUT | æ›´æ–°ä¼šè¯ |
| `/api/sessions/:id` | DELETE | åˆ é™¤ä¼šè¯ |

### èŠå¤©ç›¸å…³

| ç«¯ç‚¹ | æ–¹æ³• | æè¿° |
|:---|:---:|:---|
| `/api/chat/stream` | POST | æµå¼èŠå¤© (SSE) |
| `/api/chat/stop` | POST | åœæ­¢ç”Ÿæˆ |
| `/api/upload` | POST | ä¸Šä¼ æ–‡ä»¶ |

---

## <img src="https://api.iconify.design/material-symbols/build-outline.svg?color=%23F59E0B&width=24&height=24" valign="middle" /> æŠ€æœ¯æ ˆ

<div align="center">

| å‰ç«¯ | åç«¯ | æ•°æ®åº“ | AI æœåŠ¡ |
|:---:|:---:|:---:|:---:|
| HTML5 | Node.js | SQLite | é˜¿é‡Œäº‘ç™¾ç‚¼ |
| CSS3 | Express | - | DeepSeek |
| JavaScript | JWT | - | Moonshot (Kimi) |
| KaTeX | bcrypt | - | Tavily |
| Mermaid | multer | - | SiliconFlow |
| Highlight.js | - | - | - |

</div>

---

## <img src="https://api.iconify.design/material-symbols/folder-open-outline.svg?color=%23F59E0B&width=24&height=24" valign="middle" /> é¡¹ç›®ç»“æ„

```
rai/
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ index.html          # å‰ç«¯ HTML ç»“æ„
â”‚   â”œâ”€â”€ app.js              # å‰ç«¯æ ¸å¿ƒé€»è¾‘
â”‚   â”œâ”€â”€ styles.css          # æ ·å¼æ–‡ä»¶
â”‚   â””â”€â”€ lib/                # ç¬¬ä¸‰æ–¹åº“
â”œâ”€â”€ server.js               # åç«¯æœåŠ¡ (Express + æ™ºèƒ½è·¯ç”±å¼•æ“)
â”œâ”€â”€ textExtractor.js        # æ–‡æ¡£æ–‡æœ¬æå–å·¥å…·
â”œâ”€â”€ ai_data.db              # SQLite æ•°æ®åº“
â”œâ”€â”€ uploads/                # ä¸Šä¼ æ–‡ä»¶
â”œâ”€â”€ avatars/                # ç”¨æˆ·å¤´åƒ
â”œâ”€â”€ package.json            # ä¾èµ–é…ç½®
â””â”€â”€ README.md               # é¡¹ç›®æ–‡æ¡£
```

---

## <img src="https://api.iconify.design/material-symbols/license.svg?color=%23F59E0B&width=24&height=24" valign="middle" /> æˆæƒä¸å•†ç”¨

**ä¸ªäººç”¨æˆ·å…è´¹æ”¯æŒåˆ†æ”¯**ã€‚

å¦‚éœ€**å•†ä¸šç”¨é€”**ï¼Œè¯·è”ç³»ï¼š[rick080402@gmail.com](mailto:rick080402@gmail.com)

---

<div align="center">

# English

## RAI - Intelligent AI Chat Assistant

A smart AI chat assistant with **Intelligent Model Routing** that automatically selects the best model based on query complexity.

**RAI v0.85+** introduces the brand new **Chat Flow** feature, combining conversations with visual canvas to build your mind maps!

</div>

---

## ğŸ¨ Chat Flow (v0.85+ Major Update)

Seamlessly combine AI conversations with visual canvas to create your own mind maps:

- **Infinite Canvas**: Drag conversation content to canvas, freely organize your thoughts
- **Smart Connections**: Create semantic connections between nodes with labels
- **AI Decompose**: Select a node and let AI automatically break it into sub-topics
- **Multiple Exports**: Support PNG, SVG, Mermaid, JSON export
- **Auto Layout**: One-click to organize canvas nodes

<img width="2790" height="1716" alt="Chat Flow Interface" src="https://github.com/user-attachments/assets/96b0a2c4-b42a-4644-817f-b3d1c94a76ff" /> 
<img width="682" height="832" alt="Chat Flow Mobile" src="https://github.com/user-attachments/assets/7270482c-9b3d-4be4-84a9-d20b3726d411" />

---

### <img src="https://api.iconify.design/material-symbols/star-outline.svg?color=%23F59E0B&width=20&height=20" valign="middle" /> Key Features

#### <img src="https://api.iconify.design/material-symbols/robot-2-outline.svg?color=%23F59E0B&width=16&height=16" valign="middle" /> Multi-Model Support
- **Alibaba Cloud Qwen**: Qwen-Flash / Qwen-Plus / Qwen-Max / Qwen3 8B (Free) / Qwen3 Omni Flash
- **DeepSeek**: DeepSeek-V3.2
- **Moonshot**: Kimi K2
- **Local Deployment**: LMStudio local models

#### <img src="https://api.iconify.design/material-symbols/psychology.svg?color=%23F59E0B&width=16&height=16" valign="middle" /> Intelligent Model Routing (Core Feature)
- **Auto Mode**: Automatically select the best model based on query complexity
- **5-Dimension Analysis**: Input length, code detection, math formulas, reasoning complexity, language mix
- **Keyword Triggers**: Emotion words, professional terms, complexity indicators
- **Preset Answers**: Instant responses for common greetings, zero cost & latency

#### <img src="https://api.iconify.design/material-symbols/language.svg?color=%23F59E0B&width=16&height=16" valign="middle" /> Web Search
- Tavily API real-time search integration
- Alibaba Cloud native search support
- AI intelligently decides when to search
- Search results auto-injected into conversation context

#### <img src="https://api.iconify.design/material-symbols/thinking-problem-outline.svg?color=%23F59E0B&width=16&height=16" valign="middle" /> Thinking Mode (Chain of Thought)
- DeepSeek Reasoner deep reasoning
- Alibaba Cloud Qwen thinking mode
- Visualized thinking process
- Adjustable thinking budget (1-32768 tokens)

#### <img src="https://api.iconify.design/material-symbols/devices.svg?color=%23F59E0B&width=16&height=16" valign="middle" /> Modern UI
- Responsive design, perfect for PC / Mobile
- Dark / Light theme switching
- Streaming output with typewriter effect
- Markdown + LaTeX math rendering
- Mermaid charts (fullscreen, zoom, export)
- Beautiful animations

#### <img src="https://api.iconify.design/material-symbols/image.svg?color=%23F59E0B&width=16&height=16" valign="middle" /> Multimodal Capabilities
- Image understanding (Qwen VL Max / Qwen3 Omni Flash)
- Video understanding (Qwen VL Max Latest)
- Document upload & parsing (PDF, DOCX, TXT)
- AI responses with embedded images

#### <img src="https://api.iconify.design/material-symbols/format-quote.svg?color=%23F59E0B&width=16&height=16" valign="middle" /> Quote Reply
- Reply to specific messages
- Quick preview of quoted context
- Edit or delete quotes

#### <img src="https://api.iconify.design/material-symbols/edit-note.svg?color=%23F59E0B&width=16&height=16" valign="middle" /> Edit Messages
- Modify sent messages
- Regenerate AI response after edit
- Preserve edit history

#### <img src="https://api.iconify.design/material-symbols/card-membership.svg?color=%23F59E0B&width=16&height=16" valign="middle" /> Membership System
- Daily check-in for 20 points
- Transparent point consumption records
- VIP membership levels & benefits

#### <img src="https://api.iconify.design/material-symbols/lock-outline.svg?color=%23F59E0B&width=16&height=16" valign="middle" /> Security
- JWT token authentication
- API rate limiting
- Encrypted password storage

---

### <img src="https://api.iconify.design/material-symbols/list-alt-outline.svg?color=%23F59E0B&width=24&height=24" valign="middle" /> Feature List

| Category | Feature | Description |
|:---|:---|:---|
| **Core Chat** | Streaming Response | Typewriter effect, real-time output |
| | Markdown Rendering | Tables, lists, blockquotes, rich text |
| | Math Formulas | LaTeX syntax, complex formula rendering |
| | Code Highlighting | Auto language detection, syntax highlighting |
| | Mermaid Charts | Flowcharts, sequence diagrams, mind maps with fullscreen |
| | Copy Message | One-click copy AI response |
| | Stop Generation | Interrupt AI output anytime |
| | **Rich Media** | AI responses with images |
| | **Quote Reply** | Precise replies with context |
| | **Edit Messages** | Modify sent messages |
| **Chat Flow** | Mind Map Canvas | Drag conversations to infinite canvas |
| | Node Connections | Create semantic edges with labels |
| | AI Decompose | Smart decomposition into sub-nodes |
| | Multi-format Export | PNG / SVG / Mermaid / JSON |
| | Auto Layout | One-click node arrangement |
| **Model Capabilities** | Multi-model Switch | Qwen / DeepSeek / Kimi K2 / Local |
| | **Smart Routing** | Auto-select optimal model (Auto mode) |
| | Web Search | AI decides when to search, real-time results |
| | Thinking Mode | Visualized reasoning, collapsible animation |
| | Preset Answers | Instant response for greetings, zero tokens |
| | **Multimodal** | Image/video understanding, document parsing |
| **Session Management** | Session List | Manage all conversations in sidebar |
| | Auto Title | Generate suitable titles from content |
| | Create/Delete | Start new topics or clear old records |
| | Session Search | Quick search conversation history |
| **User System** | Register/Login | Email + password, JWT authentication |
| | Avatar Management | Upload custom avatars |
| | Personalization | Temperature, Top-P, max length settings |
| | System Prompt | Global AI persona customization |
| | **Daily Check-in** | Earn 20 points daily |
| **Interface** | Responsive Design | Desktop, tablet, mobile |
| | Theme Switch | Dark and light modes |
| | Multi-language | Chinese / English |
| | Animations | Saturn floating, metallic title, slide-in |
| | Quick Actions | Welcome page shortcuts |

---

### <img src="https://api.iconify.design/material-symbols/hub.svg?color=%23F59E0B&width=24&height=24" valign="middle" /> Intelligent Model Routing System

<div align="center">
<img width="800" alt="RAI Intelligent Model Routing System" src="https://github.com/user-attachments/assets/944d7b69-8838-4a94-bd18-7a682d44070a" />
</div>

#### Routing Strategy

| Complexity Score | Selected Model | Use Case |
|:---:|:---:|:---|
| < 0.40 | Qwen-Flash | Simple Q&A, daily chat |
| 0.40 - 0.80 | Qwen-Plus | Medium complexity |
| â‰¥ 0.80 | Qwen-Max | Professional, deep analysis |

#### 5-Dimension Evaluation

```
ğŸ“ Input Length     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘  Weight: 15%
ğŸ’» Code Detection   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘  Weight: 30%
ğŸ“ Math Formula     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘  Weight: 25%
ğŸ§  Reasoning        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘  Weight: 25%
ğŸŒ Language Mix     â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  Weight: 5%
```

#### Special Trigger Words

- **Force Max**: Emotion words, emphasis words, important punctuation
- **Professional Upgrade**: Technical terms, programming concepts, math vocabulary

---

### <img src="https://api.iconify.design/material-symbols/rocket-launch-outline.svg?color=%23F59E0B&width=24&height=24" valign="middle" /> Quick Start

#### Requirements

- Node.js 18+
- npm or yarn

#### Installation

```bash
git clone https://github.com/yourusername/RAI.git
cd RAI/rai
npm install
npm start
# or development mode
npm run dev
```

Visit `http://localhost:3009` in your browser.

---

### <img src="https://api.iconify.design/material-symbols/menu-book-outline.svg?color=%23F59E0B&width=24&height=24" valign="middle" /> API Documentation

#### Authentication

| Endpoint | Method | Description |
|:---|:---:|:---|
| `/api/auth/register` | POST | User registration |
| `/api/auth/login` | POST | User login |
| `/api/auth/verify` | GET | Verify token |

#### User

| Endpoint | Method | Description |
|:---|:---:|:---|
| `/api/user/profile` | GET | Get user info |
| `/api/user/config` | PUT | Update user config |
| `/api/user/avatar` | POST | Upload avatar |
| `/api/user/membership` | GET | Get membership status |
| `/api/user/checkin` | POST | Daily check-in |

#### Sessions

| Endpoint | Method | Description |
|:---|:---:|:---|
| `/api/sessions` | GET | Get session list |
| `/api/sessions` | POST | Create new session |
| `/api/sessions/:id` | PUT | Update session |
| `/api/sessions/:id` | DELETE | Delete session |

#### Chat

| Endpoint | Method | Description |
|:---|:---:|:---|
| `/api/chat/stream` | POST | Streaming chat (SSE) |
| `/api/chat/stop` | POST | Stop generation |
| `/api/upload` | POST | Upload file |

---

### <img src="https://api.iconify.design/material-symbols/build-outline.svg?color=%23F59E0B&width=24&height=24" valign="middle" /> Tech Stack

<div align="center">

| Frontend | Backend | Database | AI Services |
|:---:|:---:|:---:|:---:|
| HTML5 | Node.js | SQLite | Alibaba Cloud |
| CSS3 | Express | - | DeepSeek |
| JavaScript | JWT | - | Moonshot (Kimi) |
| KaTeX | bcrypt | - | Tavily |
| Mermaid | multer | - | SiliconFlow |
| Highlight.js | - | - | - |

</div>

---

### <img src="https://api.iconify.design/material-symbols/folder-open-outline.svg?color=%23F59E0B&width=24&height=24" valign="middle" /> Project Structure

```
rai/
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ index.html          # Frontend HTML structure
â”‚   â”œâ”€â”€ app.js              # Frontend core logic
â”‚   â”œâ”€â”€ styles.css          # Stylesheet
â”‚   â””â”€â”€ lib/                # Third-party libraries
â”œâ”€â”€ server.js               # Backend (Express + Smart Routing Engine)
â”œâ”€â”€ textExtractor.js        # Document text extraction tool
â”œâ”€â”€ ai_data.db              # SQLite database
â”œâ”€â”€ uploads/                # Uploaded files
â”œâ”€â”€ avatars/                # User avatars
â”œâ”€â”€ package.json            # Dependencies
â””â”€â”€ README.md               # Documentation
```

---

### <img src="https://api.iconify.design/material-symbols/play-circle-outline.svg?color=%23F59E0B&width=24&height=24" valign="middle" /> Online Demo

- **Try it out**: Visit [rick.quest](https://rick.quest) and select **RAI**.
- **Introduction**: Watch how it works at [Introduction Page](https://rick.rth2.xyz/ai/main.html#how-it-works)

### <img src="https://api.iconify.design/material-symbols/license.svg?color=%23F59E0B&width=24&height=24" valign="middle" /> License & Commercial Use

**Free for personal use and supporting branches.**

For **commercial use**, please contact: [rick080402@gmail.com](mailto:rick080402@gmail.com)

---

<div align="center">

Made with <img src="https://api.iconify.design/material-symbols/favorite.svg?color=%23F59E0B&width=16&height=16" valign="middle" /> by RAI Team

</div>
